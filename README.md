# Домашнее задание к занятию 12.7. «Репликация и масштабирование. Часть 2»

**Домашнее задание выполните в Google Docs или в md-файле в вашем репозитории GitHub.** 

Для оформления вашего решения в GitHub можете воспользоваться [шаблоном](https://github.com/netology-code/sys-pattern-homework).

Название файла Google Docs должно содержать номер лекции и фамилию студента. Пример названия: «12.7. Репликация и масштабирование. Часть 2 — Александр Александров».

Перед тем как выслать ссылку, убедитесь, что её содержимое не является приватным, то есть открыто на просмотр всем, у кого есть ссылка. Если необходимо прикрепить дополнительные ссылки, просто добавьте их в свой Google Docs.

Любые вопросы по решению задач задавайте в чате учебной группы.

---

### Задание 1

Опишите основные преимущества использования масштабирования методами:

- активный master-сервер и пассивный репликационный slave-сервер; 
- master-сервер и несколько slave-серверов;
- активный сервер со специальным механизмом репликации — distributed replicated block device (DRBD);
- SAN-кластер.

*Дайте ответ в свободной форме.*

### Ответ:

M-S: снижаеться нагрузка (разделение функционала запись\чтение), при определенной настройке 
(где slave становится master) повышается отказоустойчивость.

M-S-S-...: все тоже, что M-S, но использовать можно до 20 slave (расширяет функционал, разнообразие инфрастуктур).
Увеличивается скорость чтения/обработки запросов, повышается отказоустойчивость,
а при подключении witness отказоустойчивость возрастает еще больше.

DRBD: отказоустойчивость, принцыпы RAID1, бесперебойная работа системы,
быстрая ресинхронизация в случае падения одного из узлов, преимущества HA-кластера.

SAN: масштабируемость, установка сервисных пакетов без остановки системы, модернизация 
(простота миграции и уменьшение времени простоя).


---

### Задание 2


Разработайте план для выполнения горизонтального и вертикального шаринга базы данных. База данных состоит из трёх таблиц: 

- пользователи, 
- книги, 
- магазины (столбцы произвольно). 

Опишите принципы построения системы и их разграничение или разбивку между базами данных.

*Пришлите блоксхему, где и что будет располагаться. Опишите, в каких режимах будут работать сервера.* 

### Ответ:

При построении плана буду пользоваться принципом "клиент берет книгу" и "книга в магазине есть или нет", на основании этого буду строить горизрнтальный шардинг.
Также необходимо будет провести анализ медленных запросов. Я предпологаяю что самая "толстая" таблица будет являтся книги т.к. она связанна как с пользователями так и с магазинами.
Горизонтальный шардинг буду проводить с таблтцей книги, за shard key возму книги_id. Разбиваю таблицу на две партиции от книги_id 1-100 до книги_id 100-200. 
Для данного вида шардирования подойдет:
- master-сервер и несколько slave-серверов;
- активный сервер со специальным механизмом репликации — distributed replicated block device (DRBD);
- SAN-кластер.

![Image alt](https://github.com/IvanSKorobkov/homework/blob/main/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202022-12-27%2018-16-56.png)

В случае с вертикальным шардированием, я разбиваю базу на три таблицы, каждая из которых находится на отдельном сервере и реплицирую каждую slaveом.
Здесь также подойдут те же виды шардирования.

![Image alt](https://github.com/IvanSKorobkov/homework/blob/main/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202022-12-27%2018-22-12.png)

 
